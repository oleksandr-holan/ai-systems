# Лабораторна робота №9: Еволюційне моделювання. Варіант 9: Оптимізація інвестиційного портфелю**

## Формулювання задачі

Суть задачі полягає у розподілі капіталу між $N$ доступними активами таким чином, щоб максимізувати прибутковість портфеля при мінімальному ризику (або максимізувати коефіцієнт Шарпа).

### Генотип та Фенотип

* **Генотип (Простір пошуку):** Вектор дійсних чисел $W = [w_1, w_2, ..., w_N]$, де $w_i$ — частка капіталу, вкладена в $i$-й актив.
  * *Обмеження:* $0 \le w_i \le 1$ та $\sum_{i=1}^{N} w_i = 1$ (сума всіх часток має дорівнювати 100%).
* **Фенотип (Простір рішень):** Реальний інвестиційний портфель з розрахованими характеристиками: очікуваною прибутковістю ($R_p$) та ризиком (стандартним відхиленням $\sigma_p$).

### Цільова функція (Fitness Function)

Ми будемо використовувати **Коефіцієнт Шарпа (Sharpe Ratio)**. Він показує, скільки додаткового прибутку (понад безризикову ставку) ми отримуємо на одиницю ризику.

$$Fitness(W) = \frac{E[R_p] - R_f}{\sigma_p}$$

Де:

* $E[R_p] = \sum w_i \cdot r_i$ — очікувана прибутковість портфеля.
* $R_f$ — безризикова ставка (наприклад, депозит у надійному банку).
* $\sigma_p = \sqrt{W^T \cdot \Sigma \cdot W}$ — ризик портфеля (стандартне відхилення), де $\Sigma$ — коваріаційна матриця активів.

### Контрольні запитання до Лабораторної роботи №9

**1. Дайте визначення еволюційному моделюванню.**
**Еволюційне моделювання (Evolutionary Computation)** — це напрямок штучного інтелекту, який використовує принципи біологічної еволюції для вирішення складних обчислювальних задач, насамперед задач оптимізації та пошуку.
Воно базується на моделюванні процесів природного відбору (дарвінізм), де популяція потенційних рішень розвивається з часом: слабкі рішення відкидаються, а сильні схрещуються та видозмінюються, породжуючи ще кращі рішення.

**2. Яке призначення та області застосування еволюційного моделювання?**
**Призначення:** Знаходження глобального оптимуму (найкращого рішення) або достатньо хорошого наближеного рішення за прийнятний час у задачах, де точні математичні методи (повний перебір, градієнтний спуск) неможливі через величезний простір варіантів або відсутність гладкої функції.

**Області застосування:**

* **Оптимізація:** Маршрутизація транспорту (задача комівояжера), розкрій матеріалів, пакування рюкзака.
* **Фінанси:** Оптимізація інвестиційних портфелів, прогнозування ринків.
* **Інженерія:** Проектування форми крила літака, антен, архітектурних конструкцій.
* **Машинне навчання:** Налаштування гіперпараметрів нейромереж, еволюція архітектури нейромереж (Neuroevolution).
* **Складання розкладів:** Розклади занять в університетах, графіки роботи персоналу.

**3. У чому полягають концепції та принципи еволюційного моделювання?**
Основні концепції запозичені з біології:

1. **Популяція:** Одночасна робота з множиною рішень, а не з одним.
2. **Спадковість:** Нащадки успадковують риси батьків.
3. **Мінливість:** Наявність випадкових змін (мутацій), що забезпечує різноманітність.
4. **Природний відбір (Селекція):** Виживають ("розмножуються") найбільш пристосовані особини.
5. **Стохастичність:** Використання випадковості для виходу з локальних пасток.

**4. Які рівні представлення інформації про задачу в еволюційній моделі ви знаєте?**
Існує два ключові рівні представлення:

1. **Генотип (Простір пошуку):** Це закодоване представлення рішення, з яким працюють генетичні оператори (кросовер, мутація). Наприклад: бінарний рядок `10110`, масив дійсних чисел `[0.1, 0.5]`, деревоподібна структура.
2. **Фенотип (Простір рішень):** Це розкодоване, реальне вираження рішення в контексті задачі. Наприклад: конкретний маршрут на карті, набір параметрів двигуна, реальний інвестиційний портфель.
*Перетворення Генотип $\to$ Фенотип відбувається для оцінки якості рішення.*

**5. Охарактеризуйте типові оператори генетичних алгоритмів.**

* **Селекція (Selection):** Вибір батьківських пар для створення потомства. Пріоритет надається особам з вищим значенням фітнес-функції.
* **Схрещування (Crossover / Recombination):** Обмін генетичним матеріалом між двома (або більше) батьками для створення нащадків, які поєднують ознаки обох. (Наприклад: одноточковий, багатоточковий, арифметичний).
* **Мутація (Mutation):** Випадкова зміна одного або кількох генів в особини. Потрібна для підтримки генетичного різноманіття та запобігання передчасній збіжності алгоритму (застряганню в локальному мінімумі).

**6. Що таке фітнес-функція (цільова функція)?**
**Фітнес-функція (Fitness Function)** — це критерій якості, який зіставляє кожному фенотипу числове значення, що показує, наскільки це рішення є "хорошим" для даної задачі.
Вона є аналогом "середовища існування" в природі — саме вона визначає, хто виживе. В задачах оптимізації це зазвичай функція, яку треба максимізувати (прибуток) або мінімізувати (витрати, помилка).

**7. Опишіть загальну схему роботи генетичних алгоритмів.**

1. **Ініціалізація:** Створення початкової популяції випадковим чином.
2. **Оцінка (Evaluation):** Розрахунок фітнес-функції для кожної особини.
3. **Перевірка умов зупинки:** Якщо знайдено ідеал або вичерпано ліміт часу/поколінь — кінець.
4. **Селекція:** Відбір батьків на основі їх фітнесу.
5. **Кросовер:** Створення нащадків від відібраних батьків.
6. **Мутація:** Внесення випадкових змін у нащадків.
7. **Формування нової популяції:** Заміна старих особин новими (повна або часткова заміна).
8. **Повернення до кроку 2.**

**8. Які схеми селекції в генетичних алгоритмах ви знаєте?**

* **Турнірний відбір (Tournament Selection):** Випадково обирається $k$ особин, з них обирається найкраща. (Використано в цій лаб. роботі).
* **Рулетка (Roulette Wheel Selection):** Ймовірність вибору пропорційна значенню фітнес-функції (як сектор на колесі рулетки).
* **Ранговий відбір (Rank Selection):** Особини впорядковуються від гіршого до кращого, ймовірність залежить від порядкового номера (рангу), а не від абсолютного значення фітнесу.
* **Елітарність (Elitism):** Гарантоване перенесення $N$ найкращих особин у наступне покоління без змін.

**9. Що таке еволюційне (генетичне) програмування?**
**Генетичне програмування (GP)** — це різновид еволюційних алгоритмів, де метою є не пошук набору числових параметрів, а **автоматична генерація комп'ютерної програми (алгоритму)** або математичної формули, що вирішує задачу.

* *Генотипом* тут виступає дерево розбору (синтаксичне дерево), де вузли — це функції (IF, AND, PLUS), а листя — змінні або константи.
* *Мутація* і *кросовер* змінюють структуру цього дерева (підміняють піддерева).
